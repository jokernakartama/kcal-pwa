!function(){"use strict";var r,t,e,n,o={669:function(r,t,e){var n="~";var o=e(520);function u(r){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(r){return typeof r}:function(r){return r&&"function"==typeof Symbol&&r.constructor===Symbol&&r!==Symbol.prototype?"symbol":typeof r},u(r)}function i(r,t){for(var e=0;e<t.length;e++){var n=t[e];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(r,n.key,n)}}function c(r,t){return c=Object.setPrototypeOf||function(r,t){return r.__proto__=t,r},c(r,t)}function f(r){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(r){return!1}}();return function(){var e,n=a(r);if(t){var o=a(this).constructor;e=Reflect.construct(n,arguments,o)}else e=n.apply(this,arguments);return s(this,e)}}function s(r,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(r){if(void 0===r)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return r}(r)}function a(r){return a=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},a(r)}var l={users:"++id",goals:"userId",journal:"++id,userId,date",meals:"dayId",recipes:"++id,userId,name,*products.id",products:"++id,userId,name,proteins,fats,carbohydrates,kcalories"},d=new(function(r){!function(r,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");r.prototype=Object.create(t&&t.prototype,{constructor:{value:r,writable:!0,configurable:!0}}),Object.defineProperty(r,"prototype",{writable:!1}),t&&c(r,t)}(u,r);var t,e,n,o=f(u);function u(){var r;return function(r,t){if(!(r instanceof t))throw new TypeError("Cannot call a class as a function")}(this,u),(r=o.call(this,"db_test_2")).version(2).stores(l),r}return t=u,e&&i(t.prototype,e),n&&i(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}(o.ZP)),p={limit:20,offset:0};function y(r,t){return function(r){if(Array.isArray(r))return r}(r)||function(r,t){var e=null==r?null:"undefined"!=typeof Symbol&&r[Symbol.iterator]||r["@@iterator"];if(null==e)return;var n,o,u=[],i=!0,c=!1;try{for(e=e.call(r);!(i=(n=e.next()).done)&&(u.push(n.value),!t||u.length!==t);i=!0);}catch(r){c=!0,o=r}finally{try{i||null==e.return||e.return()}finally{if(c)throw o}}return u}(r,t)||function(r,t){if(!r)return;if("string"==typeof r)return v(r,t);var e=Object.prototype.toString.call(r).slice(8,-1);"Object"===e&&r.constructor&&(e=r.constructor.name);if("Map"===e||"Set"===e)return Array.from(r);if("Arguments"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e))return v(r,t)}(r,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function v(r,t){(null==t||t>r.length)&&(t=r.length);for(var e=0,n=new Array(t);e<t;e++)n[e]=r[e];return n}function b(r,t){var e=r.clone();return void 0!==(null==t?void 0:t.offset)&&(e=e.offset(t.offset)),void 0!==(null==t?void 0:t.limit)&&(e=e.limit(t.limit)),Promise.all([r.count(),e.toArray()]).then((function(r){var t=y(r,2);return{total:t[0],items:t[1]}}))}function h(r,t){var e=r.clone();return"desc"===(null==t?void 0:t.dir)&&(e=e.reverse()),e}var m={"GET user/{userId}/journal":function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p,e=void 0!==(null==t?void 0:t.from)?new Date(t.from):void 0,n=void 0!==(null==t?void 0:t.to)?new Date(t.to):void 0,o=d.journal.where(["userId","date"]).between([r,e],[r,n],!0,!0);return b(h(o,t),t)},"PUT journal/{record}":function(r){return d.journal.put(r)},"GET journal/{recordId}/meals":function(r){return d.meals.where("dayId").equals(r).toArray()}};function g(r){return r.trim().toLowerCase()}var w,j={"GET product/{productId}":function(r){return d.products.get(r)},"PUT product/{product}":function(r){return d.products.put(r)},"GET user/{userId}/products":function(r,t){var e;if(e=void 0!==(null==t?void 0:t.sort)?d.products.orderBy(t.sort).filter((function(t){return t.userId===r})):d.products.where("userId").equals(r),void 0!==(null==t?void 0:t.id)&&(e=e.filter((function(r){return Array.isArray(t.id)?t.id.includes(r.id):t.id===r.id}))),"string"==typeof(null==t?void 0:t.name)){var n=g(t.name);e=e.filter((function(r){return g(r.name).startsWith(n)}))}return b(h(e,t),t)}},O={"GET recipe/{recipeId}":function(r){return d.recipes.get(r)},"PUT recipe/{recipe}":function(r){return d.recipes.put(r)},"GET user/{userId}/recipes":function(r,t){var e;if(e=void 0!==(null==t?void 0:t.sort)?d.recipes.orderBy(t.sort).filter((function(t){return t.userId===r})):d.recipes.where("userId").equals(r),void 0!==(null==t?void 0:t.id)&&(e=e.and((function(r){return Array.isArray(t.id)?null==t?void 0:t.id.includes(r.id):t.id===r.id}))),void 0!==(null==t?void 0:t.products)){var n=t.products;e=e.and((function(r){return r.products.some((function(r){return n.includes(r.id)}))}))}if("string"==typeof(null==t?void 0:t.name)){var o=g(t.name);e=e.and((function(r){return g(r.name).startsWith(o)}))}return b(h(e,t),t)}},P={"GET user/{userId}":function(r){return d.users.get(r)},"PUT user/{user}":function(r){return d.users.put(r)},"DELETE user/{userId}":function(r){return d.users.delete(r)},"GET users":function(){return d.users.toArray()},"GET user/{userId}/goals":function(r){return d.goals.get({userId:r})},"PUT goals/{goals}":function(r){return d.goals.put(r)}},I=Object.assign(Object.assign(Object.assign(Object.assign({},P),m),O),j);w=I,self.onmessage=function(r){var t=r.data;if(t instanceof Object&&"string"==typeof(null==t?void 0:t.queryAction)){var e=function(r){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return r.split(t)[0]}(t.queryAction);e in w?void 0!==(null==t?void 0:t.queryActionArguments)&&Promise.resolve().then((function(){return w[e].apply(self,t.queryActionArguments)})).then((function(r){!function(r,t){self.postMessage({queryActionListener:r,queryActionResult:t})}(t.queryAction,r)})).catch((function(r){throw r})):console.warn("Unknown action: ".concat(e))}}}},u={};function i(r){var t=u[r];if(void 0!==t)return t.exports;var e=u[r]={exports:{}};return o[r].call(e.exports,e,e.exports,i),e.exports}i.m=o,i.x=function(){var r=i.O(void 0,[216],(function(){return i(669)}));return r=i.O(r)},r=[],i.O=function(t,e,n,o){if(!e){var u=1/0;for(a=0;a<r.length;a++){e=r[a][0],n=r[a][1],o=r[a][2];for(var c=!0,f=0;f<e.length;f++)(!1&o||u>=o)&&Object.keys(i.O).every((function(r){return i.O[r](e[f])}))?e.splice(f--,1):(c=!1,o<u&&(u=o));if(c){r.splice(a--,1);var s=n();void 0!==s&&(t=s)}}return t}o=o||0;for(var a=r.length;a>0&&r[a-1][2]>o;a--)r[a]=r[a-1];r[a]=[e,n,o]},e=Object.getPrototypeOf?function(r){return Object.getPrototypeOf(r)}:function(r){return r.__proto__},i.t=function(r,n){if(1&n&&(r=this(r)),8&n)return r;if("object"==typeof r&&r){if(4&n&&r.__esModule)return r;if(16&n&&"function"==typeof r.then)return r}var o=Object.create(null);i.r(o);var u={};t=t||[null,e({}),e([]),e(e)];for(var c=2&n&&r;"object"==typeof c&&!~t.indexOf(c);c=e(c))Object.getOwnPropertyNames(c).forEach((function(t){u[t]=function(){return r[t]}}));return u.default=function(){return r},i.d(o,u),o},i.d=function(r,t){for(var e in t)i.o(t,e)&&!i.o(r,e)&&Object.defineProperty(r,e,{enumerable:!0,get:t[e]})},i.f={},i.e=function(r){return Promise.all(Object.keys(i.f).reduce((function(t,e){return i.f[e](r,t),t}),[]))},i.u=function(r){return"vendors.833c150d248efb7c3ead.js"},i.miniCssF=function(r){},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(r){if("object"==typeof window)return window}}(),i.o=function(r,t){return Object.prototype.hasOwnProperty.call(r,t)},i.r=function(r){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(r,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(r,"__esModule",{value:!0})},i.j=669,function(){var r;i.g.importScripts&&(r=i.g.location+"");var t=i.g.document;if(!r&&t&&(t.currentScript&&(r=t.currentScript.src),!r)){var e=t.getElementsByTagName("script");e.length&&(r=e[e.length-1].src)}if(!r)throw new Error("Automatic publicPath is not supported in this browser");r=r.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=r}(),function(){var r={669:1};i.f.i=function(t,e){r[t]||importScripts(i.p+i.u(t))};var t=self.webpackChunkkcal_pwa=self.webpackChunkkcal_pwa||[],e=t.push.bind(t);t.push=function(t){var n=t[0],o=t[1],u=t[2];for(var c in o)i.o(o,c)&&(i.m[c]=o[c]);for(u&&u(i);n.length;)r[n.pop()]=1;e(t)}}(),n=i.x,i.x=function(){return i.e(216).then(n)};i.x()}();