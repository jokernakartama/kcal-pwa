!function(){"use strict";var e,r,t,n,u={170:function(e,r,t){var n="~";var u=t(264),o=t.n(u),i=t(520),c=t(296),s=t(913),a=t(342),d=t(503),f=t(311);function p(e){var r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var t,n=(0,f.Z)(e);if(r){var u=(0,f.Z)(this).constructor;t=Reflect.construct(n,arguments,u)}else t=n.apply(this,arguments);return(0,d.Z)(this,t)}}var l={users:"++id",goals:"userId",journal:"++id, [userId+date]",meals:"++id, recordId, userId, product.id, recipe.id",recipes:"++id, userId, name, *products.id",products:"++id, userId, name, proteins, fats, carbohydrates, kcalories"},v=new(function(e){(0,a.Z)(t,e);var r=p(t);function t(){var e;return(0,s.Z)(this,t),(e=r.call(this,"db_test_3")).version(1).stores(l),e}return(0,c.Z)(t)}(i.ZP));function h(e){return e.trim().toLowerCase()}function w(e){return e.toISOString().slice(0,10)}var m=t(43);function b(e,r){var t=e.clone();return void 0!==(null==r?void 0:r.offset)&&(t=t.offset(r.offset)),void 0!==(null==r?void 0:r.limit)&&(t=t.limit(r.limit)),Promise.all([e.count(),t.toArray()]).then((function(e){var r=(0,m.Z)(e,2);return{total:r[0],items:r[1]}}))}function x(e,r){var t=e.clone();return"desc"===(null==r?void 0:r.dir)&&(t=t.reverse()),t}var y,g=function(e,r,t,n){return new(t||(t=Promise))((function(u,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?u(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,c)}s((n=n.apply(e,r||[])).next())}))},j={"GET users/{userId}/journal":function(e,r){return g(void 0,void 0,void 0,o().mark((function t(){return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,v.journal.where("[userId+date]").equals([e,r]).first();case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})))},"DELETE users/{userId}/journal":function(e){return g(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.journal.where("userId").equals(e).delete();case 3:return r.next=5,v.meals.where("userId").equals(e).delete();case 5:r.next=11;break;case 7:if(r.prev=7,r.t0=r.catch(0),r.t0 instanceof i.ZP.ModifyError){r.next=11;break}throw r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))},"GET journal/{recordId}/meals":function(e,r){return g(void 0,void 0,void 0,o().mark((function t(){var n;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=v.meals.where("recordId").equals(e),t.next=3,b(x(n,r),r);case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}}),t)})))},"PUT meals/{meal}":function(e){return g(void 0,void 0,void 0,o().mark((function r(){var t,n,u,c;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(void 0!==e.recordId){r.next=4;break}r.t0=void 0,r.next=7;break;case 4:return r.next=6,v.journal.get(e.recordId);case 6:r.t0=r.sent;case 7:if(t=r.t0,n=null==t?void 0:t.id,void 0!==t&&t.date===w(e.time)){r.next=13;break}return r.next=12,v.journal.put({userId:e.userId,date:w(e.time)});case 12:n=r.sent;case 13:if(void 0===n){r.next=19;break}return r.next=16,v.meals.put(Object.assign(Object.assign({},e),{recordId:n}));case 16:return u=r.sent,c=Object.assign(Object.assign({},e),{id:u,recordId:n}),r.abrupt("return",c);case 19:throw new i.ZP.NotFoundError;case 20:case"end":return r.stop()}}),r)})))},"DELETE meals/{mealId}":function(e){return g(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.meals.delete(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))}},k=function(e,r,t,n){return new(t||(t=Promise))((function(u,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?u(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,c)}s((n=n.apply(e,r||[])).next())}))},O={"GET products/{productId}":function(e){return k(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.products.get(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},"PUT products/{product}":function(e){return k(void 0,void 0,void 0,o().mark((function r(){var t,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.products.put(e);case 2:return t=r.sent,n=Object.assign(Object.assign({},e),{id:t}),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))},"GET users/{userId}/products":function(e,r){return k(void 0,void 0,void 0,o().mark((function t(){var n,u;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0!==(null==r?void 0:r.sort)?v.products.orderBy(r.sort).filter((function(r){return r.userId===e})):v.products.where("userId").equals(e),void 0!==(null==r?void 0:r.id)&&(n=n.filter((function(e){return Array.isArray(r.id)?r.id.includes(e.id):r.id===e.id}))),"string"==typeof(null==r?void 0:r.name)&&(u=h(r.name),n=n.filter((function(e){return h(e.name).startsWith(u)}))),t.next=5,b(x(n,r),r);case 5:return t.abrupt("return",t.sent);case 6:case"end":return t.stop()}}),t)})))},"DELETE products/{productId}":function(e){return k(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.products.delete(e);case 3:return r.next=5,v.recipes.where("products.id").equals(e).modify((function(r){r.products=r.products.map((function(r){return Object.assign(Object.assign({},r),{isArchived:r.id===e})}))}));case 5:return r.next=7,v.meals.where("product.id").equals(e).modify({isArchived:!0});case 7:r.next=13;break;case 9:if(r.prev=9,r.t0=r.catch(0),r.t0 instanceof i.ZP.ModifyError){r.next=13;break}throw r.t0;case 13:case"end":return r.stop()}}),r,null,[[0,9]])})))}},I=function(e,r,t,n){return new(t||(t=Promise))((function(u,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?u(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,c)}s((n=n.apply(e,r||[])).next())}))},E={"GET recipes/{recipeId}":function(e){return I(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.recipes.get(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},"PUT recipes/{recipe}":function(e){return I(void 0,void 0,void 0,o().mark((function r(){var t,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.recipes.put(e);case 2:return t=r.sent,n=Object.assign(Object.assign({},e),{id:t}),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))},"GET users/{userId}/recipes":function(e,r){return I(void 0,void 0,void 0,o().mark((function t(){var n,u,i;return o().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0!==(null==r?void 0:r.sort)?v.recipes.orderBy(r.sort).filter((function(r){return r.userId===e})):v.recipes.where("userId").equals(e),void 0!==(null==r?void 0:r.id)&&(n=n.filter((function(e){return Array.isArray(r.id)?null==r?void 0:r.id.includes(e.id):r.id===e.id}))),void 0!==(null==r?void 0:r.products)&&(u=r.products,n=n.filter((function(e){return e.products.some((function(e){return u.includes(e.id)}))}))),"string"==typeof(null==r?void 0:r.name)&&(i=h(r.name),n=n.filter((function(e){return h(e.name).startsWith(i)}))),t.next=6,b(x(n,r),r);case 6:return t.abrupt("return",t.sent);case 7:case"end":return t.stop()}}),t)})))},"DELETE recipes/{recipeId}":function(e){return I(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,v.recipes.delete(e);case 3:return r.next=5,v.meals.where("product.id").equals(e).modify({isArchived:!0});case 5:r.next=11;break;case 7:if(r.prev=7,r.t0=r.catch(0),r.t0 instanceof i.ZP.ModifyError){r.next=11;break}throw r.t0;case 11:case"end":return r.stop()}}),r,null,[[0,7]])})))}},P=function(e,r,t,n){return new(t||(t=Promise))((function(u,o){function i(e){try{s(n.next(e))}catch(e){o(e)}}function c(e){try{s(n.throw(e))}catch(e){o(e)}}function s(e){var r;e.done?u(e.value):(r=e.value,r instanceof t?r:new t((function(e){e(r)}))).then(i,c)}s((n=n.apply(e,r||[])).next())}))},T={"GET users/{userId}":function(e){return P(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.users.get(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},"PUT users/{user}":function(e){return P(void 0,void 0,void 0,o().mark((function r(){var t,n;return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.users.put(e);case 2:return t=r.sent,n=Object.assign(Object.assign({},e),{id:t}),r.abrupt("return",n);case 5:case"end":return r.stop()}}),r)})))},"DELETE users/{userId}":function(e){return P(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.users.delete(e);case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},"GET users":function(){return P(void 0,void 0,void 0,o().mark((function e(){return o().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,v.users.toArray();case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))},"GET users/{userId}/goals":function(e){return P(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.goals.get({userId:e});case 2:return r.abrupt("return",r.sent);case 3:case"end":return r.stop()}}),r)})))},"PUT goals/{goals}":function(e){return P(void 0,void 0,void 0,o().mark((function r(){return o().wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.next=2,v.goals.put(e);case 2:return r.abrupt("return",e);case 3:case"end":return r.stop()}}),r)})))}},A=Object.assign(Object.assign(Object.assign(Object.assign({},T),j),E),O);y=A,self.onmessage=function(e){var r=e.data;if(r instanceof Object&&"string"==typeof(null==r?void 0:r.queryAction)){var t=function(e){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:n;return e.split(r)[0]}(r.queryAction);t in y?void 0!==(null==r?void 0:r.queryActionArguments)&&Promise.resolve().then((function(){return y[t].apply(self,r.queryActionArguments)})).then((function(e){!function(e,r){self.postMessage({queryActionListener:e,queryActionResult:r})}(r.queryAction,e)})).catch((function(e){throw e})):console.warn("Unknown action: ".concat(t))}}}},o={};function i(e){var r=o[e];if(void 0!==r)return r.exports;var t=o[e]={exports:{}};return u[e].call(t.exports,t,t.exports,i),t.exports}i.m=u,i.x=function(){var e=i.O(void 0,[216,429],(function(){return i(170)}));return e=i.O(e)},e=[],i.O=function(r,t,n,u){if(!t){var o=1/0;for(d=0;d<e.length;d++){t=e[d][0],n=e[d][1],u=e[d][2];for(var c=!0,s=0;s<t.length;s++)(!1&u||o>=u)&&Object.keys(i.O).every((function(e){return i.O[e](t[s])}))?t.splice(s--,1):(c=!1,u<o&&(o=u));if(c){e.splice(d--,1);var a=n();void 0!==a&&(r=a)}}return r}u=u||0;for(var d=e.length;d>0&&e[d-1][2]>u;d--)e[d]=e[d-1];e[d]=[t,n,u]},i.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(r,{a:r}),r},t=Object.getPrototypeOf?function(e){return Object.getPrototypeOf(e)}:function(e){return e.__proto__},i.t=function(e,n){if(1&n&&(e=this(e)),8&n)return e;if("object"==typeof e&&e){if(4&n&&e.__esModule)return e;if(16&n&&"function"==typeof e.then)return e}var u=Object.create(null);i.r(u);var o={};r=r||[null,t({}),t([]),t(t)];for(var c=2&n&&e;"object"==typeof c&&!~r.indexOf(c);c=t(c))Object.getOwnPropertyNames(c).forEach((function(r){o[r]=function(){return e[r]}}));return o.default=function(){return e},i.d(u,o),u},i.d=function(e,r){for(var t in r)i.o(r,t)&&!i.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:r[t]})},i.f={},i.e=function(e){return Promise.all(Object.keys(i.f).reduce((function(r,t){return i.f[t](e,r),r}),[]))},i.u=function(e){return{216:"vendors",429:"polyfills"}[e]+"."+{216:"4cc2bc88a7d6214eac0e",429:"88affb5193a1521733be"}[e]+".js"},i.miniCssF=function(e){},i.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),i.o=function(e,r){return Object.prototype.hasOwnProperty.call(e,r)},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.j=170,function(){var e;i.g.importScripts&&(e=i.g.location+"");var r=i.g.document;if(!e&&r&&(r.currentScript&&(e=r.currentScript.src),!e)){var t=r.getElementsByTagName("script");t.length&&(e=t[t.length-1].src)}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),i.p=e}(),function(){var e={170:1};i.f.i=function(r,t){e[r]||importScripts(i.p+i.u(r))};var r=self.webpackChunkkcal_pwa=self.webpackChunkkcal_pwa||[],t=r.push.bind(r);r.push=function(r){var n=r[0],u=r[1],o=r[2];for(var c in u)i.o(u,c)&&(i.m[c]=u[c]);for(o&&o(i);n.length;)e[n.pop()]=1;t(r)}}(),n=i.x,i.x=function(){return Promise.all([i.e(216),i.e(429)]).then(n)};i.x()}();